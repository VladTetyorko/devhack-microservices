<div class="container-fluid px-4">
    <!-- Page Header -->
    <div class="page-header d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">
                <i class="bi bi-plus-circle-fill me-2 text-primary"></i>
                Create New Topic
            </h2>
            <p class="text-muted mb-0">Add a new topic within a category</p>
        </div>
        <button class="btn btn-outline-secondary" (click)="cancel()">
            <i class="bi bi-arrow-left me-2"></i> Back to Topics
        </button>
    </div>

    <!-- Success Alert -->
    <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show shadow-sm" role="alert">
        <i class="bi bi-check-circle-fill me-2"></i>
        <strong>Success!</strong> {{ successMessage }}
        <button type="button" class="btn-close" (click)="successMessage = ''" aria-label="Close"></button>
    </div>

    <!-- Error Alert -->
    <div *ngIf="error" class="alert alert-danger alert-dismissible fade show shadow-sm" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        <strong>Error!</strong> {{ error }}
        <button type="button" class="btn-close" (click)="error = ''" aria-label="Close"></button>
    </div>

    <!-- Create Form -->
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-header bg-light">
                    <h5 class="mb-0">
                        <i class="bi bi-tag-fill me-2"></i>
                        Topic Information
                    </h5>
                </div>
                <div class="card-body">
                    <form [formGroup]="topicForm" (ngSubmit)="onSubmit()" novalidate>
                        <!-- Topic Name Field -->
                        <div class="mb-4">
                            <label for="name" class="form-label required">
                                <i class="bi bi-tag me-1"></i>
                                Topic Name
                            </label>
                            <input
                                    type="text"
                                    id="name"
                                    class="form-control"
                                    [class.is-invalid]="hasFieldError('name')"
                                    formControlName="name"
                                    placeholder="Enter topic name (e.g., JavaScript, React, Node.js)"
                                    maxlength="50"
                            >
                            <div class="invalid-feedback" *ngIf="hasFieldError('name')">
                                {{ getFieldError('name') }}
                            </div>
                            <div class="form-text">
                                <i class="bi bi-info-circle me-1"></i>
                                Use descriptive names that clearly identify the specific topic or technology.
                            </div>
                        </div>

                        <!-- Category Field -->
                        <div class="mb-4">
                            <label for="categoryId" class="form-label required">
                                <i class="bi bi-folder me-1"></i>
                                Category
                            </label>
                            <select
                                    id="categoryId"
                                    class="form-select"
                                    [class.is-invalid]="hasFieldError('categoryId')"
                                    formControlName="categoryId"
                                    [disabled]="loadingCategories"
                            >
                                <option value="">-- Select a Category --</option>
                                <option *ngFor="let category of availableCategories" [value]="category.id">
                                    {{ category.name }}
                                    <span *ngIf="category.description"> - {{ category.description }}</span>
                                </option>
                            </select>
                            <div class="invalid-feedback" *ngIf="hasFieldError('categoryId')">
                                {{ getFieldError('categoryId') }}
                            </div>
                            <div class="form-text">
                                <i class="bi bi-info-circle me-1"></i>
                                <span *ngIf="loadingCategories">Loading available categories...</span>
                                <span *ngIf="!loadingCategories">Choose the category that best fits this topic. All topics must belong to a category.</span>
                            </div>
                        </div>

                        <!-- Description Field -->
                        <div class="mb-4">
                            <label for="description" class="form-label">
                                <i class="bi bi-text-paragraph me-1"></i>
                                Description
                                <span class="text-muted">(Optional)</span>
                            </label>
                            <textarea
                                    id="description"
                                    class="form-control"
                                    [class.is-invalid]="hasFieldError('description')"
                                    formControlName="description"
                                    rows="4"
                                    placeholder="Provide a brief description of what this topic covers..."
                                    maxlength="500"
                            ></textarea>
                            <div class="invalid-feedback" *ngIf="hasFieldError('description')">
                                {{ getFieldError('description') }}
                            </div>
                            <div class="form-text">
                                <i class="bi bi-info-circle me-1"></i>
                                Optional description to help others understand what this topic covers.
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex gap-2">
                                <button
                                        type="submit"
                                        class="btn btn-primary"
                                        [disabled]="isSubmitting || topicForm.invalid"
                                >
                                    <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-2"
                                          role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </span>
                                    <i *ngIf="!isSubmitting" class="bi bi-check-lg me-2"></i>
                                    {{ isSubmitting ? 'Creating...' : 'Create Topic' }}
                                </button>

                                <button
                                        type="button"
                                        class="btn btn-outline-secondary"
                                        (click)="resetForm()"
                                        [disabled]="isSubmitting"
                                >
                                    <i class="bi bi-arrow-clockwise me-2"></i>
                                    Reset
                                </button>
                            </div>

                            <button
                                    type="button"
                                    class="btn btn-outline-danger"
                                    (click)="cancel()"
                                    [disabled]="isSubmitting"
                            >
                                <i class="bi bi-x-lg me-2"></i>
                                Cancel
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Help Card -->
            <div class="card shadow-sm mt-4">
                <div class="card-header bg-light">
                    <h6 class="mb-0">
                        <i class="bi bi-lightbulb me-2"></i>
                        Tips for Creating Topics
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-success">
                                <i class="bi bi-check-circle me-1"></i>
                                Good Examples
                            </h6>
                            <ul class="list-unstyled small">
                                <li><i class="bi bi-dot"></i> JavaScript</li>
                                <li><i class="bi bi-dot"></i> React Hooks</li>
                                <li><i class="bi bi-dot"></i> Database Design</li>
                                <li><i class="bi bi-dot"></i> System Architecture</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-warning">
                                <i class="bi bi-exclamation-triangle me-1"></i>
                                Best Practices
                            </h6>
                            <ul class="list-unstyled small">
                                <li><i class="bi bi-dot"></i> Keep names concise and clear</li>
                                <li><i class="bi bi-dot"></i> Use consistent naming conventions</li>
                                <li><i class="bi bi-dot"></i> Avoid special characters</li>
                                <li><i class="bi bi-dot"></i> Check for existing similar topics</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>